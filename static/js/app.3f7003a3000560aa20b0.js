webpackJsonp([1],{0:function(e,n){},1:function(e,n){},"2jkt":function(e,n){},"5W1q":function(e,n){},"9Wev":function(e,n){},EEbw:function(e,n){e.exports={version:"0.20.7"}},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("7+uW"),s={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]},o=t("VU/8")({name:"App"},s,!1,null,null,null).exports,i=t("/ocq"),c={1:"Main Net",2:"Deprecated Morden test network",3:"Ropsten test network",4:"Rinkeby test network",42:"Kovan test network",4447:"Truffle Develop Network",5777:"Ganache Blockchain"},r=t("NYxO"),u={name:"hello-metamask",computed:Object(r.b)({isInjected:function(e){return e.web3.isInjected},network:function(e){return c[e.web3.networkId]},coinbase:function(e){return e.web3.coinbase},balance:function(e){return e.web3.balance},ethBalance:function(e){if(null!==e.web3.web3Instance)return e.web3.web3Instance().fromWei(e.web3.balance,"ether")}})},p={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"metamask-info"},[e.isInjected?t("p",{attrs:{id:"has-metamask"}},[t("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),e._v(" Metamask installed")]):t("p",{attrs:{id:"no-metamask"}},[t("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}}),e._v(" Metamask not found")]),e._v(" "),t("p",[e._v("以太坊网络: "+e._s(e.network)+" (请使用测试网络 Rinkeby)")]),e._v(" "),t("p",[e._v("您的账户: "+e._s(e.coinbase))]),e._v(" "),t("p",[e._v("您的账户余额: "+e._s(e.ethBalance)+" Eth ( "+e._s(e.balance)+" Wei )")]),e._v(" "),t("p",[e._v(" -------------------------")]),e._v(" "),t("p",[e._v(" 说明：押对1赔8 ")])])},staticRenderFns:[]};var m={name:"casino",data:function(){return{amount:null,pending:!1,winEvent:null}},methods:{clickNumber:function(e){var n=this;console.log("BETTING ON NUMBER, AMOUNT",e.target.innerHTML,this.amount),this.winEvent=null,this.pending=!0,this.$store.state.contractInstance().bet(e.target.innerHTML,{gas:3e5,value:this.$store.state.web3.web3Instance().toWei(this.amount,"ether"),from:this.$store.state.web3.coinbase},function(e,t){e?(console.log(e),n.pending=!1):n.$store.state.contractInstance().Won().watch(function(e,t){e?console.log("could not get event Won()"):(n.winEvent=t.args,n.winEvent._amount=parseInt(t.args._amount,10),n.winEvent._amount_ether=t.args._amount/1e18,n.winEvent._number=parseInt(t.args._number,10),n.winEvent._winningNumber=parseInt(t.args._winningNumber,10),n.pending=!1,console.log("cj args",t.args),console.log("cj args",t.args))})})}},mounted:function(){console.log("dispatching getContractInstance"),this.$store.dispatch("getContractInstance")}},d={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"casino container"},[t("h1",[e._v("欢迎来到押宝游戏")]),e._v(" "),t("h4",[e._v("填写押注金额后，然后点击1~9之间数字，通过Metamask支付就可参与。(测试网络：请将Metamask连接Rinkeby)")]),e._v("\n  押注: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],attrs:{placeholder:"0 Ether"},domProps:{value:e.amount},on:{input:function(n){n.target.composing||(e.amount=n.target.value)}}}),e._v(" "),t("ul",[t("li",{on:{click:e.clickNumber}},[e._v("1")]),e._v(" "),t("li",{on:{click:e.clickNumber}},[e._v("2")]),e._v(" "),t("li",{on:{click:e.clickNumber}},[e._v("3")]),e._v(" "),t("li",{on:{click:e.clickNumber}},[e._v("4")]),e._v(" "),t("li",{on:{click:e.clickNumber}},[e._v("5")]),e._v(" "),t("li",{on:{click:e.clickNumber}},[e._v("6")]),e._v(" "),t("li",{on:{click:e.clickNumber}},[e._v("7")]),e._v(" "),t("li",{on:{click:e.clickNumber}},[e._v("8")]),e._v(" "),t("li",{on:{click:e.clickNumber}},[e._v("9")])]),e._v(" "),e._m(0),e._v(" "),e.pending?t("img",{attrs:{id:"loader",src:"https://loading.io/spinners/double-ring/lg.double-ring-spinner.gif"}}):e._e(),e._v(" "),e.winEvent?t("div",{staticClass:"event"},[t("p",[e._v(" 本期中奖号码: "+e._s(e.winEvent._winningNumber))]),e._v(" "),t("p",[e._v(" 您的投注号码: "+e._s(e.winEvent._number))]),e._v(" "),e.winEvent._status?t("p",{attrs:{id:"has-won"}},[t("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),e._v(" 恭喜，押中了，奖励 "+e._s(e.winEvent._amount_ether)+" ether ( "+e._s(e.winEvent._amount)+" wei)")]):t("p",{attrs:{id:"has-lost"}},[t("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}}),e._v(" 很遗憾，没押中，再试一次.")])]):e._e(),e._v(" "),t("p",[e._v(" -------------------------")])])},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("p",[this._v(" 合约地址: 0x9835A61808750D841c89335F2BEaA9535a10210D "),n("a",{attrs:{href:"https://rinkeby.etherscan.io/address/0x9835A61808750D841c89335F2BEaA9535a10210D",target:"_blank"}},[this._v(" ( 查看合约 )")])])}]};var l={name:"casino-dapp",beforeCreate:function(){console.log("registerWeb3 Action dispatched from casino-dapp.vue"),this.$store.dispatch("registerWeb3")},components:{"hello-metamask":t("VU/8")(u,p,!1,function(e){t("2jkt")},"data-v-3b782630",null).exports,"casino-component":t("VU/8")(m,d,!1,function(e){t("9Wev")},"data-v-bfb17c2a",null).exports}},b={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",[n("casino-component"),this._v(" "),n("hello-metamask")],1)},staticRenderFns:[]};var y=t("VU/8")(l,b,!1,function(e){t("UJCs")},"data-v-2a98f029",null).exports;a.a.use(i.a);var v=new i.a({routes:[{path:"/",name:"casino-dapp",component:y}]}),f=(t("5W1q"),{web3:{isInjected:!1,web3Instance:null,networkId:null,coinbase:null,balance:null,error:null},contractInstance:null}),_=t("woOf"),w=t.n(_),g=t("//Fk"),h=t.n(g),k=t("8k0n"),I=t.n(k),x=new h.a(function(e,n){var t=window.web3;if(void 0!==t){var a=new I.a(t.currentProvider);e({injectedWeb3:a.isConnected(),web3:function(){return a}})}else n(new Error("Unable to connect to Metamask"))}).then(function(e){return new h.a(function(n,t){e.web3().version.getNetwork(function(a,s){a?t(new Error("Unable to retrieve network ID")):(e=w()({},e,{networkId:s}),n(e))})})}).then(function(e){return new h.a(function(n,t){e.web3().eth.getCoinbase(function(a,s){a?t(new Error("Unable to retrieve coinbase")):(e=w()({},e,{coinbase:s}),n(e))})})}).then(function(e){return new h.a(function(n,t){e.web3().eth.getBalance(e.coinbase,function(a,s){a?t(new Error("Unable to retrieve balance for address: "+e.coinbase)):(e=w()({},e,{balance:s}),n(e))})})}),E=function(e){var n=window.web3;n=new I.a(n.currentProvider),setInterval(function(){if(n&&C.state.web3.web3Instance)if(n.eth.coinbase!==C.state.web3.coinbase){var e=n.eth.coinbase;n.eth.getBalance(n.eth.coinbase,function(n,t){n?console.log(n):C.dispatch("pollWeb3",{coinbase:e,balance:parseInt(t,10)})})}else n.eth.getBalance(C.state.web3.coinbase,function(e,n){e?console.log(e):parseInt(n,10)!==C.state.web3.balance&&C.dispatch("pollWeb3",{coinbase:C.state.web3.coinbase,balance:n})})},500)},W=[{constant:!1,inputs:[{name:"_number",type:"uint256"}],name:"bet",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[],name:"kill",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_minBet",type:"uint256"},{name:"_houseEdge",type:"uint256"}],payable:!0,stateMutability:"payable",type:"constructor"},{payable:!1,stateMutability:"nonpayable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!1,name:"_status",type:"bool"},{indexed:!1,name:"_amount",type:"uint256"},{indexed:!1,name:"_number",type:"uint256"},{indexed:!1,name:"_winningNumber",type:"uint256"}],name:"Won",type:"event"},{constant:!0,inputs:[],name:"checkContractBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],N=new h.a(function(e,n){e(new I.a(window.web3.currentProvider).eth.contract(W).at("0x9835a61808750d841c89335f2beaa9535a10210d"))});a.a.use(r.a);var C=new r.a.Store({strict:!0,state:f,mutations:{registerWeb3Instance:function(e,n){console.log("registerWeb3instance Mutation being executed",n);var t=n,a=e.web3;a.coinbase=t.coinbase,a.networkId=t.networkId,a.balance=parseInt(t.balance,10),a.isInjected=t.injectedWeb3,a.web3Instance=t.web3,e.web3=a,E()},pollWeb3Instance:function(e,n){console.log("pollWeb3Instance mutation being executed",n),e.web3.coinbase=n.coinbase,e.web3.balance=parseInt(n.balance,10)},registerContractInstance:function(e,n){console.log("Casino contract instance: ",n.address),e.contractInstance=function(){return n}}},actions:{registerWeb3:function(e){var n=e.commit;console.log("registerWeb3 Action being executed"),x.then(function(e){console.log("committing result to registerWeb3Instance mutation"),n("registerWeb3Instance",e)}).catch(function(e){console.log("error in action registerWeb3",e)})},pollWeb3:function(e,n){var t=e.commit;console.log("pollWeb3 action being executed"),t("pollWeb3Instance",n)},getContractInstance:function(e){var n=e.commit;N.then(function(e){n("registerContractInstance",e)}).catch(function(e){return console.log(e)})}}});a.a.config.productionTip=!1,new a.a({el:"#app",router:v,store:C,components:{App:o},template:"<App/>"})},"R/pS":function(e,n){e.exports=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"name",outputs:[{name:"o_name",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"subRegistrar",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_registrar",type:"address"}],name:"setSubRegistrar",outputs:[],type:"function"},{constant:!1,inputs:[],name:"Registrar",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"},{name:"_primary",type:"bool"}],name:"setAddress",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_content",type:"bytes32"}],name:"setContent",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"disown",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_winner",type:"address"}],name:"AuctionEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_bidder",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"NewBid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"},{indexed:!0,name:"addr",type:"address"}],name:"PrimaryChanged",type:"event"}]},UIsv:function(e,n){e.exports=[{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_refund",type:"address"}],name:"disown",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"}],name:"setAddr",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"}]},UJCs:function(e,n){},oPsS:function(e,n){e.exports=[{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"indirectId",type:"bytes32"},{name:"value",type:"uint256"}],name:"icapTransfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"to",type:"bytes32"}],name:"deposit",outputs:[],payable:!0,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"AnonymousDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"indirectId",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"IcapTransfer",type:"event"}]}},["NHnr"]);
//# sourceMappingURL=app.3f7003a3000560aa20b0.js.map